(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"1fKG":function(e,t){e.exports=ReduxSaga},"7pVq":function(e,t,n){"use strict";n.r(t);var i=n("cDcd"),r=n.n(i),o=n("faye"),a=n.n(o),s=n("h74D"),l=n("rKB8"),c=n("/CF2"),d=n("1fKG"),h=n.n(d);const u="ADD_LOSS_POINT",p="ADD_ACCURACY_POINT",f="RESET_CHART",y=(e,t)=>({type:u,pt:{batch:e,loss:t}}),m=(e,t)=>({type:p,pt:{batch:e,accuracy:t}}),v=()=>({type:f});var g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};const _={loss:[],accuracy:[]};var S=(e=_,t)=>{switch(t.type){case u:return g({},e,{loss:[...e.loss,t.pt]});case p:return g({},e,{accuracy:[...e.accuracy,t.pt]});case f:return _;default:return e}};const I="ADD_STROKE",E="ADD_STROKE_POS",D="END_STROKE",b="RESET_DRAWING",w=()=>({type:b});var x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};const C={isDrawing:!1,isEndStroke:!1,strokes:[]};var T=(e=C,t)=>{switch(t.type){case I:return x({},e,{isDrawing:!0,isEndStroke:!1,strokes:[...e.strokes,[t.pos]]});case E:return x({},e,{strokes:[...e.strokes.slice(0,e.strokes.length-1),[...e.strokes[e.strokes.length-1],t.pos]]});case D:return x({},e,{isDrawing:!1,isEndStroke:!0});case b:return C;default:return e}};const O={INIT:"INIT",LOAD_PRETRAINED_MODEL_SUCCEEDED:"LOAD_PRETRAINED_MODEL_SUCCEEDED",LOAD_AND_TRAIN_MNIST_REQUESTED:"LOAD_AND_TRAIN_MNIST_REQUESTED",LOADING_MNIST:"LOADING_MNIST",TRAINING_MNIST:"TRAINING_MNIST",LOAD_AND_TRAIN_MNIST_SUCCEEDED:"LOAD_AND_TRAIN_MNIST_SUCCEEDED",PREDICT_REQUESTED:"PREDICT_REQUESTED",PREDICT_SUCCEEDED:"PREDICT_SUCCEEDED"},A=()=>({type:O.LOAD_PRETRAINED_MODEL_SUCCEEDED}),N=()=>({type:O.LOADING_MNIST}),R=()=>({type:O.TRAINING_MNIST}),P=()=>({type:O.LOAD_AND_TRAIN_MNIST_SUCCEEDED}),k=e=>({type:O.PREDICT_REQUESTED,image:e}),L=e=>({type:O.PREDICT_SUCCEEDED,prediction:e});var U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};const M={status:O.INIT,retrainStatus:O.INIT};var j=(e=M,t)=>{switch(t.type){case O.LOAD_PRETRAINED_MODEL_SUCCEEDED:return U({},e,{status:O.LOAD_PRETRAINED_MODEL_SUCCEEDED});case O.LOADING_MNIST:case O.TRAINING_MNIST:case O.LOAD_AND_TRAIN_MNIST_SUCCEEDED:return U({},e,{retrainStatus:t.type});case O.PREDICT_SUCCEEDED:return U({},e,{prediction:t.prediction});default:return e}};const B={INPUT:"INPUT",DISPLAY_BOUNDING_BOX:"DISPLAY_BOUNDING_BOX",DISPLAY_CROPPED_BOX:"DISPLAY_CROPPED_BOX",DISPLAY_CENTERED_BOX:"DISPLAY_CENTERED_BOX",DISPLAY_NORMALIZED_BOX:"DISPLAY_NORMALIZED_BOX"},$=(e,t)=>({type:B.DISPLAY_BOUNDING_BOX,imageUrl:e,rect:t}),z=e=>({type:B.DISPLAY_CROPPED_BOX,croppedUrl:e}),H=e=>({type:B.DISPLAY_CENTERED_BOX,centeredUrl:e}),Y=e=>({type:B.DISPLAY_NORMALIZED_BOX,normalizedUrl:e});var G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};var X=(e={},t)=>{switch(t.type){case B.DISPLAY_BOUNDING_BOX:return G({},e,{imageUrl:t.imageUrl,rect:t.rect});case B.DISPLAY_CROPPED_BOX:return G({},e,{croppedUrl:t.croppedUrl});case B.DISPLAY_CENTERED_BOX:return G({},e,{centeredUrl:t.centeredUrl});case B.DISPLAY_NORMALIZED_BOX:return G({},e,{normalizedUrl:t.normalizedUrl});default:return e}},Z=Object(l.combineReducers)({drawing:T,pipeline:X,mnist:j,chart:S}),F=n("oZtI"),Q=n("uZTb");class K{initializeModel(e){this.data=e,this.model=Q.sequential(),this.model.add(Q.layers.conv2d({inputShape:[28,28,1],kernelSize:5,filters:8,strides:1,activation:"relu",kernelInitializer:"varianceScaling"})),this.model.add(Q.layers.maxPooling2d({poolSize:[2,2],strides:[2,2]})),this.model.add(Q.layers.conv2d({kernelSize:5,filters:16,strides:1,activation:"relu",kernelInitializer:"varianceScaling"})),this.model.add(Q.layers.maxPooling2d({poolSize:[2,2],strides:[2,2]})),this.model.add(Q.layers.flatten()),this.model.add(Q.layers.dense({units:10,kernelInitializer:"varianceScaling",activation:"softmax"})),this.compile()}compile(){const e=Q.train.sgd(K.LEARNING_RATE);this.model.compile({optimizer:e,loss:"categoricalCrossentropy",metrics:["accuracy"]})}*loadModel(){const{host:e,protocol:t}=window.location;this.model=yield Q.loadModel(`${t}//${e}/${K.CLASSIFIER_FOLDER}/${K.CLASSIFIER_NAME}.json`),this.compile()}getTrainBatch(e){const t=this.data.nextTrainBatch(K.BATCH_SIZE);let n;if(t.xs=t.xs.reshape([K.BATCH_SIZE,28,28,1]),e%K.TEST_ITERATION_FREQUENCY==0){const e=this.data.nextTrainBatch(K.TEST_BATCH_SIZE);n=[e.xs.reshape([K.TEST_BATCH_SIZE,28,28,1]),e.labels]}return[t,n]}*train(e=!1){for(let e=0;e<K.TRAIN_BATCHES;e+=1){const[t,n]=Q.tidy(()=>this.getTrainBatch(e)),i=yield this.model.fit(t.xs,t.labels,{batchSize:K.BATCH_SIZE,validationData:n,epochs:1}),r=i.history.loss[0],o=i.history.acc[0];yield Object(F.e)(y(e,r)),null!=n&&(yield Object(F.e)(m(e,o))),Q.dispose([t,n]),yield Q.nextFrame()}e&&(yield this.model.save(`downloads://${K.CLASSIFIER_NAME}`))}predict(e){return Q.tidy(()=>{const t=this.model.predict(e);return Array.from(t.argMax(1).dataSync())[0]})}}K.TRAIN_BATCHES=150,K.BATCH_SIZE=64,K.TEST_ITERATION_FREQUENCY=5,K.TEST_BATCH_SIZE=1e3,K.LEARNING_RATE=.15,K.CLASSIFIER_FOLDER="classifiers",K.CLASSIFIER_NAME="model";const W=784,J=10,q=65e3,V=55e3,ee=q-V,te="https://storage.googleapis.com/learnjs-data/model-builder/mnist_images.png",ne="https://storage.googleapis.com/learnjs-data/model-builder/mnist_labels_uint8";class ie{constructor(){this.load=(async()=>{const e=new Image,t=document.createElement("canvas"),n=t.getContext("2d"),i=new Promise((i,r)=>{e.crossOrigin="",e.onload=(()=>{e.width=e.naturalWidth,e.height=e.naturalHeight;const r=new ArrayBuffer(q*W*4);t.width=e.width,t.height=5e3;for(let i=0;i<q/5e3;i++){const o=new Float32Array(r,i*W*5e3*4,5e3*W);n.drawImage(e,0,5e3*i,e.width,5e3,0,0,e.width,5e3);const a=n.getImageData(0,0,t.width,t.height);for(let e=0;e<a.data.length/4;e++)o[e]=a.data[4*e]/255}this.datasetImages=new Float32Array(r),i()}),e.src=te}),r=fetch(ne),[o,a]=await Promise.all([i,r]);this.datasetLabels=new Uint8Array(await a.arrayBuffer()),this.trainIndices=Q.util.createShuffledIndices(V),this.testIndices=Q.util.createShuffledIndices(ee),this.trainImages=this.datasetImages.slice(0,W*V),this.testImages=this.datasetImages.slice(W*V),this.trainLabels=this.datasetLabels.slice(0,J*V),this.testLabels=this.datasetLabels.slice(J*V)}),this.shuffledTrainIndex=0,this.shuffledTestIndex=0}nextTrainBatch(e){return this.nextBatch(e,[this.trainImages,this.trainLabels],()=>(this.shuffledTrainIndex=(this.shuffledTrainIndex+1)%this.trainIndices.length,this.trainIndices[this.shuffledTrainIndex]))}nextTestBatch(e){return this.nextBatch(e,[this.testImages,this.testLabels],()=>(this.shuffledTestIndex=(this.shuffledTestIndex+1)%this.testIndices.length,this.testIndices[this.shuffledTestIndex]))}nextBatch(e,t,n){const i=new Float32Array(e*W),r=new Uint8Array(e*J);for(let o=0;o<e;o++){const e=n(),a=t[0].slice(e*W,e*W+W);i.set(a,o*W);const s=t[1].slice(e*J,e*J+J);r.set(s,o*J)}return{xs:Q.tensor2d(i,[e,W]),labels:Q.tensor2d(r,[e,J])}}}class re{constructor(e){this.xmin=e.width,this.xmax=-1,this.ymin=e.height,this.ymax=-1}computeWidth(){return this.xmax-this.xmin+1}computeHeight(){return this.ymax-this.ymin+1}}function*oe(e){yield Object(F.e)(R());const t=new K;return t.initializeModel(e),yield Object(F.b)(t,t.train),t}function*ae(){yield Object(F.e)(N());const e=new ie;return yield Object(F.c)(e.load),yield Object(F.c)(oe,e)}function*se(){const e=new K;return yield Object(F.b)(e,e.loadModel),yield Object(F.e)(A()),e}function*le(e,t){const n=function(e){const t=[],{data:n}=e;for(let i=0;i<e.width*e.height;i+=1){const e=4*i,r=(n[e+0]+n[e+1]+n[e+2])/3/255;t.push(r)}return t}(t),i=Q.tensor(n,[1,28,28,1]),r=e.predict(i);yield Object(F.e)(L(r))}function*ce(e){let t=e;for(;;){const e=yield Object(F.f)([O.PREDICT_REQUESTED,O.LOAD_AND_TRAIN_MNIST_REQUESTED]);switch(e.type){case O.PREDICT_REQUESTED:yield Object(F.c)(le,t,e.image);break;case O.LOAD_AND_TRAIN_MNIST_REQUESTED:yield Object(F.e)(v()),yield Object(F.e)(w()),t=t.data?yield Object(F.c)(oe,t.data):yield Object(F.c)(ae),yield Object(F.e)(P())}}}var de=function*(){const e=yield Object(F.c)(se);yield Object(F.c)(ce,e)};function*he(e){const t=document.createElement("canvas");t.width=280,t.height=280,t.getContext("2d").putImageData(e.image,0,0);const n=function(e){const t=new re(e);for(let n=0;n<e.width*e.height;n+=1){const i=4*n;if(e.data[i+0]>0||e.data[i+1]>0||e.data[i+2]>0){const i=n%e.width,r=Math.floor(n/e.width);t.xmin=Math.min(i,t.xmin),t.xmax=Math.max(i,t.xmax),t.ymin=Math.min(r,t.ymin),t.ymax=Math.max(r,t.ymax)}}return t}(e.image);return yield Object(F.e)($(t.toDataURL(),n)),{canvas:t,rect:n}}function*ue(e,t){const n=document.createElement("canvas");n.width=200,n.height=200;const i=n.getContext("2d"),r=t.computeWidth(),o=t.computeHeight(),a=200/Math.max(r,o),s={width:r*a,height:o*a};return i.drawImage(e,t.xmin,t.ymin,r,o,0,0,s.width,s.height),yield Object(F.e)(z(n.toDataURL())),{croppedCanvas:n,croppedRectSize:s}}function*pe(e,t){const n=document.createElement("canvas");return n.width=280,n.height=280,n.getContext("2d").drawImage(e,n.width/2-t.width/2,n.height/2-t.height/2),yield Object(F.e)(H(n.toDataURL())),n}function*fe(e){const t=document.createElement("canvas");return t.width=28,t.height=28,t.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height),yield Object(F.e)(Y(t.toDataURL())),t}function*ye(e){const t=e.getContext("2d");yield Object(F.e)(k(t.getImageData(0,0,e.width,e.height)))}function*me(e){const{canvas:t,rect:n}=yield Object(F.c)(he,e),{croppedCanvas:i,croppedRectSize:r}=yield Object(F.c)(ue,t,n),o=yield Object(F.c)(pe,i,r),a=yield Object(F.c)(fe,o);yield Object(F.c)(ye,a)}var ve=function*(){yield Object(F.g)(B.INPUT,me)};function*ge(){yield Object(F.a)([Object(F.d)(de),Object(F.d)(ve)])}n("M7k7");var _e=n("Ol7k"),Se=(n("Jmwx"),n("BMrR")),Ie=n("Dtiu"),Ee=n.n(Ie),De=(n("04bd"),n("W9HT")),be=(n("17x9"),function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&o)for(var s in o)void 0===n[s]&&(n[s]=o[s]);else n||(n=o||{});if(1===a)n.children=r;else if(a>1){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+3];n.children=l}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}());const we=Ee.a.canvas.withConfig({displayName:"drawing__Canvas"})(["width:300px;height:300px;border-color:dodgerblue;border-width:5px;border-style:solid;display:block;touch-action:none;&:hover{border-color:deepskyblue;}"]);var xe=Object(s.connect)(e=>({isDrawing:e.drawing.isDrawing,isEndStroke:e.drawing.isEndStroke,strokes:e.drawing.strokes}),e=>({addStroke:t=>e((e=>({type:I,pos:e}))(t)),addStrokePos:t=>e((e=>({type:E,pos:e}))(t)),endStroke:()=>e({type:D}),addInput:t=>e((e=>({type:B.INPUT,image:e}))(t))}))(class extends r.a.Component{constructor(e){super(e),this.onMouseDown=(e=>{const{addStroke:t}=this.props;t(this.computeMousePos(e))}),this.onMouseMove=(e=>{const{isDrawing:t,addStrokePos:n}=this.props;t&&n(this.computeMousePos(e))}),this.onStrokeEnd=(()=>{const{isDrawing:e,endStroke:t}=this.props;e&&t()}),this.setCanvasRef=(e=>{this.canvas=e}),this.canvas=null,this.ctx=null}componentDidMount(){this.initContext()}componentDidUpdate(){this.initContext(),this.drawStrokes();const{isEndStroke:e,addInput:t}=this.props;e&&t(this.ctx.getImageData(0,0,280,280))}initContext(){this.ctx=this.canvas.getContext("2d"),this.ctx.lineWidth=10,this.ctx.lineJoin="round",this.ctx.lineCap="round",this.ctx.strokeStyle="white",this.ctx.fillStyle="dark",this.clearCanvas()}clearCanvas(){this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}computeMousePos(e){return{x:this.computeMousePosX(e),y:this.computeMousePosY(e)}}computeMousePosX(e){const t=this.canvas.getBoundingClientRect(),n=this.canvas.width/t.width;return(e.clientX-t.left)*n}computeMousePosY(e){const t=this.canvas.getBoundingClientRect(),n=this.canvas.height/t.height;return(e.clientY-t.top)*n}drawStrokes(){const{strokes:e}=this.props;for(let t=0;t<e.length;t+=1){const n=e[t];this.ctx.beginPath(),this.ctx.moveTo(n[0].x,n[0].y);for(let e=1;e<n.length;e+=1)this.ctx.lineTo(n[e].x,n[e].y);this.ctx.stroke()}}render(){return be("div",{"touch-action":"none"},void 0,be(we,{innerRef:this.setCanvasRef,onPointerDown:this.onMouseDown,onPointerMove:this.onMouseMove,onPointerUp:this.onStrokeEnd,onMouseLeave:this.onStrokeEnd,width:"280",height:"280"}))}}),Ce=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&o)for(var s in o)void 0===n[s]&&(n[s]=o[s]);else n||(n=o||{});if(1===a)n.children=r;else if(a>1){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+3];n.children=l}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}();const Te=Ee.a.h2.withConfig({displayName:"output__H2"})(["text-align:center;"]);class Oe extends r.a.PureComponent{render(){const{prediction:e}=this.props;return Ce(Te,{},void 0,null!=e?`Prediction: ${e}`:"Draw a number (0-9) in the black box above")}}Oe.defaultProps={prediction:null};var Ae=Object(s.connect)(e=>({prediction:e.mnist.prediction}))(Oe),Ne=(n("rO+z"),n("kPKH"));var Re=Ee()(Ne.a).withConfig({displayName:"center-col__CenterCol"})(["display:flex;align-items:center;justify-content:center;"]),Pe=(n("L/Qf"),n("2/Rp"));var ke=Ee()(Pe.a).withConfig({displayName:"button-space__ButtonSpace"})(["margin:0 2px;"]);var Le=Object(s.connect)(e=>({disabled:null==e.mnist.prediction}),e=>({onClick:()=>e(w())}))(ke),Ue=(n("k994"),n("NJEC"));function Me(e){return e.mnist.retrainStatus!==O.INIT&&e.mnist.retrainStatus!==O.LOAD_AND_TRAIN_MNIST_SUCCEEDED}var je=Object(s.connect)(e=>({loading:Me(e),disabled:null==e.mnist.prediction,children:(e=>{switch(e.mnist.retrainStatus){case O.LOADING_MNIST:return"Loading MNIST database";case O.TRAINING_MNIST:return"Training new model";default:return"Retrain model"}})(e)}),()=>({}))(ke),Be=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&o)for(var s in o)void 0===n[s]&&(n[s]=o[s]);else n||(n=o||{});if(1===a)n.children=r;else if(a>1){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+3];n.children=l}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}();const $e=Ee.a.p.withConfig({displayName:"confirm-retrain-button__PWarning"})(["color:red;"]),ze=Be("div",{},void 0,Be("p",{},void 0,"The system has already loaded a pretrained model with 0.99700 accuracy. If you want to train a new model, please click on continue button."),Be($e,{},void 0,"It is unrecommended to run the training on your phone. The process will drain your battery."));var He=Be(je,{});var Ye=({onConfirm:e})=>Be(Ue.a,{title:ze,trigger:"click",okText:"Continue",onConfirm:e},void 0,He);var Ge=Object(s.connect)(null,e=>({onConfirm:()=>e({type:O.LOAD_AND_TRAIN_MNIST_REQUESTED})}))(Ye),Xe=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&o)for(var s in o)void 0===n[s]&&(n[s]=o[s]);else n||(n=o||{});if(1===a)n.children=r;else if(a>1){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+3];n.children=l}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),Ze=Xe("div",{},void 0,Xe(Le,{},void 0,"Clear"),Xe(Ge,{}));var Fe=()=>Ze,Qe=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&o)for(var s in o)void 0===n[s]&&(n[s]=o[s]);else n||(n=o||{});if(1===a)n.children=r;else if(a>1){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+3];n.children=l}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),Ke=Qe(Re,{xs:24},void 0,Qe(xe,{})),We=Qe(Re,{xs:24},void 0,Qe(Ae,{})),Je=Qe(Re,{xs:24},void 0,Qe(Fe,{}));const qe=({spinning:e})=>Qe(De.a,{spinning:e},void 0,Ke,We,Je);qe.defaultProps={spinning:!0};var Ve=qe;var et=Object(s.connect)(e=>({spinning:e.mnist.status===O.INIT||Me(e)}))(Ve),tt=n("HTZB"),nt=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&o)for(var s in o)void 0===n[s]&&(n[s]=o[s]);else n||(n=o||{});if(1===a)n.children=r;else if(a>1){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+3];n.children=l}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}();class it extends r.a.Component{static getObjectKeyName(e,t){return Object.keys(e)[t]}render(){const{data:e,cols:t}=this.props,n=it.getObjectKeyName(t,0),i=it.getObjectKeyName(t,1),r=`${n}*${i}`;return e.length>0?nt(tt.Chart,{height:400,data:e,scale:t,padding:["auto","auto",40,"auto"],forceFit:!0},void 0,nt(tt.Axis,{name:n,title:!0}),nt(tt.Axis,{name:i,title:!0}),nt(tt.Tooltip,{crosshairs:{type:"cross"}}),nt(tt.Geom,{type:"line",position:r,size:2}),nt(tt.Geom,{type:"point",position:r,size:4,shape:"circle",style:{stroke:"#fff",lineWidth:1}})):null}}it.defaultProps={data:null,cols:null};var rt=Object(s.connect)(e=>({data:e.chart.accuracy,cols:{batch:{range:[0,1],alias:"Batch"},accuracy:{min:0,alias:"Accuracy"}}}))(it);var ot=Object(s.connect)(e=>({data:e.chart.loss,cols:{batch:{range:[0,1],alias:"Batch"},loss:{min:0,alias:"Loss"}}}))(it),at=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&o)for(var s in o)void 0===n[s]&&(n[s]=o[s]);else n||(n=o||{});if(1===a)n.children=r;else if(a>1){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+3];n.children=l}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),st=at(Se.a,{},void 0,at(Ne.a,{md:12},void 0,at(ot,{})),at(Ne.a,{md:12},void 0,at(rt,{})));var lt=()=>st,ct=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&o)for(var s in o)void 0===n[s]&&(n[s]=o[s]);else n||(n=o||{});if(1===a)n.children=r;else if(a>1){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+3];n.children=l}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}();const dt=Ee()(Se.a).withConfig({displayName:"display__DisplayRow"})(["margin-bottom:10px;"]),ht=Ee.a.h3.withConfig({displayName:"display__H3"})(["margin:0;"]),ut=Ee.a.canvas.withConfig({displayName:"display__Canvas"})(["display:block;"]);class pt extends r.a.Component{constructor(e){super(e),this.setCanvasRef=(e=>{this.canvas=e}),this.canvas=null,this.ctx=null}componentDidMount(){this.initContext()}componentDidUpdate(){this.initContext()}initContext(){this.ctx=this.canvas.getContext("2d"),this.clearCanvas(),this.loadImage()}clearCanvas(){this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}loadImage(){const{imageUrl:e}=this.props;if(e){const t=new Image;t.onload=(()=>{this.ctx.drawImage(t,0,0)}),t.src=e}}render(){const{className:e,width:t,height:n,title:i}=this.props;return ct(dt,{},void 0,ct(Re,{span:24},void 0,ct(ht,{},void 0,i)),ct(Re,{span:24},void 0,ct(ut,{innerRef:this.setCanvasRef,className:e,width:t,height:n})))}}pt.defaultProps={imageUrl:null,className:"",width:280,height:280};const ft=Ee()(pt).withConfig({displayName:"display__Display140"})(["width:140px;height:140px;"]),yt=(Ee()(pt).withConfig({displayName:"display__Display200"})(["width:200px;height:200px;"]),Ee()(pt).withConfig({displayName:"display__Display100"})(["width:100px;height:100px;"])),mt=Ee()(pt).withConfig({displayName:"display__Display28"})(["width:28px;height:28px;"]);var vt=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&o)for(var s in o)void 0===n[s]&&(n[s]=o[s]);else n||(n=o||{});if(1===a)n.children=r;else if(a>1){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+3];n.children=l}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}();class gt extends r.a.Component{constructor(...e){var t;return t=super(...e),this.setDisplay=(e=>{this.display=e}),t}componentDidMount(){this.initContext()}componentDidUpdate(){this.initContext()}initContext(){const{imageUrl:e,rect:t}=this.props;if(e){const n=new Image;n.onload=(()=>{this.display.ctx.drawImage(n,0,0),this.display.ctx.strokeStyle="red",this.display.ctx.strokeRect(t.xmin,t.ymin,t.computeWidth(),t.computeHeight())}),n.src=e}}render(){return vt(ft,{innerRef:this.setDisplay,title:"Bounding box"})}}gt.defaultProps={imageUrl:null,rect:null};var _t=Object(s.connect)(e=>({imageUrl:e.pipeline.imageUrl,rect:e.pipeline.rect}))(gt);var St=Object(s.connect)(e=>({imageUrl:e.pipeline.centeredUrl,width:280,height:280,title:"Centered image"}))(ft);var It=Object(s.connect)(e=>({imageUrl:e.pipeline.croppedUrl,width:200,height:200,title:"Cropped image"}))(yt);var Et=Object(s.connect)(e=>({imageUrl:e.pipeline.normalizedUrl,width:28,height:28,title:"Normalized image"}))(mt),Dt=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&o)for(var s in o)void 0===n[s]&&(n[s]=o[s]);else n||(n=o||{});if(1===a)n.children=r;else if(a>1){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+3];n.children=l}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}();var bt=Dt(Ee()(Se.a).withConfig({displayName:"image-pipeline__ImagePipelineRow"})(["margin-top:20px;"]),{type:"flex",align:"middle"},void 0,Dt(Re,{xs:24,sm:12,md:6},void 0,Dt(_t,{})),Dt(Re,{xs:24,sm:12,md:6},void 0,Dt(It,{})),Dt(Re,{xs:24,sm:12,md:6},void 0,Dt(St,{})),Dt(Re,{xs:24,sm:12,md:6},void 0,Dt(Et,{})));var wt=()=>bt,xt=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&o)for(var s in o)void 0===n[s]&&(n[s]=o[s]);else n||(n=o||{});if(1===a)n.children=r;else if(a>1){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+3];n.children=l}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}();const{Content:Ct}=_e.a,Tt=Ee()(Ct).withConfig({displayName:"mnist-content__ContentContainer"})(["max-width:880px;margin:0 auto;"]);var Ot=xt(Se.a,{},void 0,xt(Tt,{},void 0,xt(et,{}),xt(lt,{}),xt(wt,{})));var At=()=>Ot,Nt=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&o)for(var s in o)void 0===n[s]&&(n[s]=o[s]);else n||(n=o||{});if(1===a)n.children=r;else if(a>1){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+3];n.children=l}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}();const{Header:Rt}=_e.a,Pt=Ee.a.h1.withConfig({displayName:"mnist-header__H1"})(["color:white;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]);var kt=Nt(Ee()(Rt).withConfig({displayName:"mnist-header__WhiteHeader"})(["background:dodgerblue;margin-bottom:20px;"]),{},void 0,Nt(Pt,{},void 0,"Digit Recognition with Tensorflow.js and React"));var Lt=()=>kt,Ut=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&o)for(var s in o)void 0===n[s]&&(n[s]=o[s]);else n||(n=o||{});if(1===a)n.children=r;else if(a>1){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+3];n.children=l}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),Mt=Ut("div",{},void 0,Ut(_e.a,{},void 0,Ut(Lt,{}),Ut(At,{})));var jt=()=>Mt,Bt=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&o)for(var s in o)void 0===n[s]&&(n[s]=o[s]);else n||(n=o||{});if(1===a)n.children=r;else if(a>1){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+3];n.children=l}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}();window.BizCharts.track(!1);var $t=Bt(jt,{});var zt=class extends r.a.Component{constructor(e){super(e),this.store=function(e){const t=Object(c.composeWithDevTools)({}),n=h()(),i=[n],r=Object(l.createStore)(Z,e,t(Object(l.applyMiddleware)(...i)));return n.run(ge),r}()}render(){return Bt(s.Provider,{store:this.store},void 0,$t)}},Ht=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var o=t&&t.defaultProps,a=arguments.length-3;if(n||0===a||(n={}),n&&o)for(var s in o)void 0===n[s]&&(n[s]=o[s]);else n||(n=o||{});if(1===a)n.children=r;else if(a>1){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+3];n.children=l}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}();a.a.render(Ht(zt,{}),document.getElementById("app"))},Dtiu:function(e,t){e.exports=styled},HTZB:function(e,t){e.exports=BizCharts},cDcd:function(e,t){e.exports=React},faye:function(e,t){e.exports=ReactDOM},h74D:function(e,t){e.exports=ReactRedux},rKB8:function(e,t){e.exports=Redux},uZTb:function(e,t){e.exports=tf}},[["7pVq",2,1]]]);